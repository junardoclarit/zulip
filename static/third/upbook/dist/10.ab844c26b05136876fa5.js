(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"07RH":function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),a=function(){return function(){}}(),r=e("pMnS"),u=e("ueff"),o=e("lOTE"),i=e("WmtN"),d=e("RChO"),s=e("hc6C"),c=e("nWrj"),p=e("x3ba"),g=e("dqnu"),f=e("GI4A"),m=e("1XyP"),b=e("zOaw"),h=e("WYqd"),v=e("EBed"),w=e("xDb2"),C=e("ZYCi"),O=e("mrSG"),M=e("yGQT"),_=e("tg95"),P=e("2pPx"),y=e("VnD/"),x=function(n){function l(l){var e=n.call(this)||this;return e.store=l,e}return Object(O.d)(l,n),l.prototype.ngOnInit=function(){var n=this;this.subs=this.store.pipe(Object(M.z)(_.a),Object(y.a)(Boolean)).subscribe(function(l){return n.totalReward=l.rewardsBalance})},l}(P.a),R=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]   .rewards-container[_ngcontent-%COMP%]{background-color:#fff;position:relative}[_nghost-%COMP%]   .rewards-container[_ngcontent-%COMP%]::before{height:211px;width:100%;display:block;content:'';background-color:#5ea225;position:absolute;top:0;left:0}[_nghost-%COMP%]   .rewards-container[_ngcontent-%COMP%]   .rewards-top[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;position:relative;color:#fff;min-height:240px;background:url(/static/third/upbook/dist/rewards_bg.377a1d1148e648f7692e.svg) center 0 no-repeat}[_nghost-%COMP%]   .rewards-container[_ngcontent-%COMP%]   .rewards-top[_ngcontent-%COMP%]   .total-reward[_ngcontent-%COMP%]{font-size:85px;font-weight:700}[_nghost-%COMP%]   .rewards-container[_ngcontent-%COMP%]   .rewards-top[_ngcontent-%COMP%]   .total-reward[_ngcontent-%COMP%]   span.currency[_ngcontent-%COMP%]{font-size:28px;font-weight:500;padding-right:3px}[_nghost-%COMP%]   .rewards-container[_ngcontent-%COMP%]   .rewards-top[_ngcontent-%COMP%]   .reward-info[_ngcontent-%COMP%]{font-size:18px;white-space:nowrap}"]],data:{}});function I(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,21,"div",[["class","m-grid m-grid--hor m-grid--root m-page m-content--skin-light2"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,20,"div",[["class","m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,19,"div",[["class","m-grid__item m-grid__item--fluid m-wrapper"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,4,"div",[["class","m-subheader "]],null,null,null,null,null)),(n()(),t["\u0275eld"](4,0,null,null,3,"div",[["class","d-flex align-items-center"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,2,"div",[["class","mr-auto"]],null,null,null,null,null)),(n()(),t["\u0275eld"](6,0,null,null,1,"h3",[["class","m-subheader__title"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,[" My Rewards "])),(n()(),t["\u0275eld"](8,0,null,null,13,"div",[["class","m-content"]],null,null,null,null,null)),(n()(),t["\u0275eld"](9,0,null,null,12,"div",[["class","row"]],null,null,null,null,null)),(n()(),t["\u0275eld"](10,0,null,null,11,"div",[["class","col-xl-12"]],null,null,null,null,null)),(n()(),t["\u0275eld"](11,0,null,null,10,"div",[["class","m-portlet m-portlet--mobile"]],null,null,null,null,null)),(n()(),t["\u0275eld"](12,0,null,null,9,"div",[["class","rewards-container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](13,0,null,null,6,"div",[["class","rewards-top"]],null,null,null,null,null)),(n()(),t["\u0275eld"](14,0,null,null,3,"div",[["class","total-reward"]],null,null,null,null,null)),(n()(),t["\u0275eld"](15,0,null,null,1,"span",[["class","currency"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["$"])),(n()(),t["\u0275ted"](17,null,[""," "])),(n()(),t["\u0275eld"](18,0,null,null,1,"div",[["class","reward-info"]],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Your available reward. Choose how you want to use it "])),(n()(),t["\u0275eld"](20,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),t["\u0275did"](21,212992,null,0,C.p,[C.b,t.ViewContainerRef,t.ComponentFactoryResolver,[8,null],t.ChangeDetectorRef],null,null)],function(n,l){n(l,21,0)},function(n,l){n(l,17,0,l.component.totalReward||"0.00")})}function V(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"upb-rewards",[],null,null,null,I,R)),t["\u0275did"](1,245760,null,0,x,[M.l],null,null)],function(n,l){n(l,1,0)},null)}var T=t["\u0275ccf"]("upb-rewards",x,V,{},{},[]),j=e("Ip0R"),k=e("dzgT"),N=e("E9S1"),D=function(n){function l(l){var e=n.call(this)||this;return e.store=l,e}return Object(O.d)(l,n),l.prototype.ngOnInit=function(){var n=this;this.subs=Object(k.a)(this.store.pipe(Object(M.z)(_.e)),this.store.pipe(Object(M.z)(_.c))).pipe(Object(y.a)(function(n){return Boolean(n[0]&&n[1])})).subscribe(function(l){var e=l[0],t=l[1];e.length?(n.brandsList=e,n.isCAD="cad"===t.selectedCompany.currency,n.sortModel=n.isCAD?"CA":"US",n.doSort(),n.error=""):n.store.dispatch(new N.d)}),this.subs=this.store.pipe(Object(M.z)(_.f),Object(y.a)(Boolean)).subscribe(function(l){return n.error=l.error.errorMessage})},l.prototype.doSort=function(){var n=this;this.brandsList&&(this.sortedBrands=this.brandsList.filter(function(l){return("CA"!==n.sortModel||"B238587"!==l.brandKey)&&l.items[0].countries.includes(n.sortModel)}))},l}(P.a),z=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]   .sort-buttons-block[_ngcontent-%COMP%]{text-align:center;padding:24px 0 12px}[_nghost-%COMP%]   .sort-buttons-block[_ngcontent-%COMP%]   label.btn.btn-default[_ngcontent-%COMP%]{color:#2b2a2a;font-weight:700;font-size:12px;margin-bottom:0}[_nghost-%COMP%]   .sort-buttons-block[_ngcontent-%COMP%]   label.btn.btn-default.active[_ngcontent-%COMP%]{background-color:#5ea225;color:#fff}[_nghost-%COMP%]   .reward-brands-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .reward-brands-list[_ngcontent-%COMP%]   .brand-item[_ngcontent-%COMP%]{width:33%;text-align:center;margin-top:34px;margin-bottom:6px}[_nghost-%COMP%]   .reward-brands-list[_ngcontent-%COMP%]   .brand-item[_ngcontent-%COMP%]   a.brand-link[_ngcontent-%COMP%]{display:inline-block;text-decoration:none}[_nghost-%COMP%]   .reward-brands-list[_ngcontent-%COMP%]   .brand-item[_ngcontent-%COMP%]   a.brand-link[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:auto;max-width:100%}[_nghost-%COMP%]   .reward-brands-list[_ngcontent-%COMP%]   .brand-item[_ngcontent-%COMP%]   a.brand-link[_ngcontent-%COMP%]   .brand-name[_ngcontent-%COMP%]{display:block;font-size:20px;color:#2b2a2a;padding-top:16px}[_nghost-%COMP%]   .rewards-bottom[_ngcontent-%COMP%]{padding:40px 50px}[_nghost-%COMP%]   .rewards-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#8c8c8c;font-size:14px}[_nghost-%COMP%]   .error-container[_ngcontent-%COMP%]{text-align:center;font-size:24px;padding-top:24px;color:#e25a59}"]],data:{}});function S(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(n,l){n(l,0,0,t["\u0275inlineInterpolate"](1,"",l.parent.context.$implicit.imageUrls["300w-326ppi"],""),t["\u0275inlineInterpolate"](1,"",l.parent.context.$implicit.brandName,""))})}function E(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","/static/third/upbook/dist/assets/images/logo_compact.png"]],[[8,"alt",0]],null,null,null,null))],null,function(n,l){n(l,0,0,t["\u0275inlineInterpolate"](1,"",l.parent.context.$implicit.brandName,""))})}function A(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","brand-item"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,8,"a",[["class","brand-link"],["queryParamsHandling","merge"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(n,l,e){var a=!0;return"click"===l&&(a=!1!==t["\u0275nov"](n,2).onClick(e.button,e.ctrlKey,e.metaKey,e.shiftKey)&&a),a},null,null)),t["\u0275did"](2,671744,null,0,C.n,[C.l,C.a,j.LocationStrategy],{queryParamsHandling:[0,"queryParamsHandling"],routerLink:[1,"routerLink"]},null),t["\u0275pad"](3,1),(n()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](5,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,E)),t["\u0275did"](7,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](8,0,null,null,1,"span",[["class","brand-name"]],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["",""]))],function(n,l){var e=n(l,3,0,l.context.$implicit.brandKey);n(l,2,0,"merge",e),n(l,5,0,l.context.$implicit.imageUrls),n(l,7,0,!l.context.$implicit.imageUrls)},function(n,l){n(l,1,0,t["\u0275nov"](l,2).target,t["\u0275nov"](l,2).href),n(l,9,0,l.context.$implicit.items[0].rewardName)})}function $(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","reward-brands-list"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,A)),t["\u0275did"](2,278528,null,0,j.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){n(l,2,0,l.component.sortedBrands)},null)}function L(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","error-container"]],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,[" ","\n"]))],null,function(n,l){n(l,1,0,l.component.error)})}function B(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,$)),t["\u0275did"](1,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,L)),t["\u0275did"](3,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](4,0,null,null,4,"div",[["class","rewards-bottom"]],null,null,null,null,null)),(n()(),t["\u0275eld"](5,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,[" * The merchants represented are not sponsors of the rewards or otherwise affiliated with this company. The logos and other identifying marks attached are trademarks of and owned by each represented company and/or its affiliates. Please visit each company's website for additional terms and conditions. "])),(n()(),t["\u0275eld"](7,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,[' *Amazon.com Gift Cards ("GCs") sold by UpBook, an authorized and independent reseller of Amazon.com Gift Cards. Except as required by law, GCs cannot be transferred for value or redeemed for cash. GCs may be used only for purchases of eligible goods on Amazon.com or certain of its affiliated websites. Purchases are deducted from the GC balance. To redeem or view a GC balance, visit \u201cYour Account\u201d on Amazon.com. Amazon is not responsible if a GC is lost, stolen, destroyed or used without permission. See www.amazon.com/gc-legal for complete terms, restrictions and exceptions. For any other questions, see www.amazon.com/gc. GCs are issued by ACI Gift Cards, Inc., a Washington corporation. All Amazon \xae, TM & \xa9 are IP of Amazon.com, Inc. or its affiliates. No expiration date or service fees. ']))],function(n,l){var e=l.component;n(l,1,0,!e.error&&e.sortedBrands),n(l,3,0,e.error)},null)}function G(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"upb-brands-list",[],null,null,null,B,z)),t["\u0275did"](1,245760,null,0,D,[M.l],null,null)],function(n,l){n(l,1,0)},null)}var F=t["\u0275ccf"]("upb-brands-list",D,G,{},{},[]),U=e("3/yi"),q=e("lWGj"),H=e("70RP"),K=e("gIcY"),W=e("37MK"),J=e("B9TK"),X=t["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:30px 60px;position:relative}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-image[_ngcontent-%COMP%]{padding-right:120px}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]{color:#2b2a2a;max-width:500px}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:400;font-size:32px}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;padding:12px 0}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label){display:flex;justify-content:space-between;align-items:center;position:relative;margin:0}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label)::before{display:block;content:'$';position:absolute;font-size:18px;color:#2b2a2a;font-weight:700;left:8px;top:8px}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label)   .reward-value[_ngcontent-%COMP%]{width:125px;padding-right:24px;padding-left:24px;font-weight:700;text-align:center;font-size:18px;color:#2b2a2a;border-color:#979797;-moz-appearance:textfield}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label)   .reward-value[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label)   .reward-value[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label)     .alert{margin-bottom:0;padding:10px 24px}[_nghost-%COMP%]   .brand-details-container[_ngcontent-%COMP%]   .brand-details[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:not(.select-label)     .alert-dismissible .close{top:2px;right:4px}[_nghost-%COMP%]   .no-money[_ngcontent-%COMP%]{text-align:center;font-size:24px;padding-top:24px;font-weight:700}[_nghost-%COMP%]   .brand-actions[_ngcontent-%COMP%]{text-align:center;padding:30px 0}[_nghost-%COMP%]   .brand-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 18px;font-weight:700;color:#fff;min-width:220px;font-size:20px}[_nghost-%COMP%]   .brand-actions[_ngcontent-%COMP%]   button.btn-gray[_ngcontent-%COMP%]{background-color:#929292}[_nghost-%COMP%]     p{line-height:23px}[_nghost-%COMP%]     p a{color:#2b2a2a}[_nghost-%COMP%]     p a:hover{text-decoration:underline}[_nghost-%COMP%]   .brand-disclaimer[_ngcontent-%COMP%]{color:#8c8c8c}[_nghost-%COMP%]   .brand-disclaimer[_ngcontent-%COMP%]     p{line-height:23px;color:#8c8c8c}[_nghost-%COMP%]   .brand-disclaimer[_ngcontent-%COMP%]     p a{color:#8c8c8c}[_nghost-%COMP%]     upb-toast-message .alert.alert-success{margin:1rem 0 0!important;text-align:center}[_nghost-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#fff;opacity:.7}"]],data:{}});function Y(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[],[[8,"src",4],[8,"alt",0]],null,null,null,null))],null,function(n,l){var e=l.component;n(l,0,0,t["\u0275inlineInterpolate"](1,"",e.brandData.imageUrls["300w-326ppi"],""),t["\u0275inlineInterpolate"](1,"",e.brandData.brandName,""))})}function Z(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"img",[["src","/static/third/upbook/dist/assets/images/logo_compact.png"]],[[8,"alt",0]],null,null,null,null))],null,function(n,l){n(l,0,0,t["\u0275inlineInterpolate"](1,"",l.component.brandData.brandName,""))})}function Q(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"upb-toast-message",[],null,[[null,"closed"]],function(n,l,e){var t=!0;return"closed"===l&&(t=!1!==n.component.toastClosed(e)&&t),t},U.b,U.a)),t["\u0275did"](1,114688,null,0,q.a,[],{type:[0,"type"],message:[1,"message"]},{closed:"closed"})],function(n,l){var e=l.component;n(l,1,0,e.toast.type,e.toast.message)},null)}function nn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["Please, type the sum (min $",", max $","):"])),(n()(),t["\u0275eld"](2,0,null,null,9,"label",[],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,6,"input",[["class","form-control m-input reward-value"],["name","rewardValue"],["type","text"],["upbNumbersOnly",""]],[[8,"max",0],[8,"min",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"change"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(n,l,e){var a=!0,r=n.component;return"input"===l&&(a=!1!==t["\u0275nov"](n,4).onInputChange(e)&&a),"input"===l&&(a=!1!==t["\u0275nov"](n,5)._handleInput(e.target.value)&&a),"blur"===l&&(a=!1!==t["\u0275nov"](n,5).onTouched()&&a),"compositionstart"===l&&(a=!1!==t["\u0275nov"](n,5)._compositionStart()&&a),"compositionend"===l&&(a=!1!==t["\u0275nov"](n,5)._compositionEnd(e.target.value)&&a),"ngModelChange"===l&&(a=!1!==(r.rewardValue=e)&&a),"keyup"===l&&(a=!1!==r.validateRewardAmount()&&a),"change"===l&&(a=!1!==r.isValidRewardAmount()&&a),a},null,null)),t["\u0275did"](4,16384,null,0,H.a,[t.ElementRef],null,null),t["\u0275did"](5,16384,null,0,K.f,[t.Renderer2,t.ElementRef,[2,K.b]],null,null),t["\u0275prd"](1024,null,K.q,function(n){return[n]},[K.f]),t["\u0275did"](7,671744,null,0,K.v,[[8,null],[8,null],[8,null],[6,K.q]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,K.r,null,[K.v]),t["\u0275did"](9,16384,null,0,K.s,[[4,K.r]],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,Q)),t["\u0275did"](11,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,7,0,"rewardValue",e.rewardValue),n(l,11,0,e.rewardError)},function(n,l){var e=l.component;n(l,1,0,e.minReward,e.maxReward),n(l,3,0,t["\u0275inlineInterpolate"](1,"",e.maxReward,""),t["\u0275inlineInterpolate"](1,"",e.minReward,""),t["\u0275nov"](l,9).ngClassUntouched,t["\u0275nov"](l,9).ngClassTouched,t["\u0275nov"](l,9).ngClassPristine,t["\u0275nov"](l,9).ngClassDirty,t["\u0275nov"](l,9).ngClassValid,t["\u0275nov"](l,9).ngClassInvalid,t["\u0275nov"](l,9).ngClassPending)})}function ln(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,3,"option",[],[[8,"disabled",0]],null,null,null,null)),t["\u0275did"](1,147456,null,0,K.w,[t.ElementRef,t.Renderer2,[2,K.A]],{value:[0,"value"]},null),t["\u0275did"](2,147456,null,0,K.H,[t.ElementRef,t.Renderer2,[8,null]],{value:[0,"value"]},null),(n()(),t["\u0275ted"](3,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.faceValue),n(l,2,0,l.context.$implicit.faceValue)},function(n,l){n(l,0,0,l.context.$implicit.faceValue>l.component.totalReward),n(l,3,0,l.context.$implicit.rewardName)})}function en(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"strong",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["This GiftCard has fixed reward values, please select:"])),(n()(),t["\u0275eld"](2,0,null,null,8,"label",[["class","select-label"]],null,null,null,null,null)),(n()(),t["\u0275eld"](3,0,null,null,7,"select",[["class","form-control m-input"],["id","rewardValues"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"change"],[null,"blur"]],function(n,l,e){var a=!0,r=n.component;return"change"===l&&(a=!1!==t["\u0275nov"](n,4).onChange(e.target.value)&&a),"blur"===l&&(a=!1!==t["\u0275nov"](n,4).onTouched()&&a),"ngModelChange"===l&&(a=!1!==(r.rewardValue=e)&&a),a},null,null)),t["\u0275did"](4,16384,null,0,K.A,[t.Renderer2,t.ElementRef],null,null),t["\u0275prd"](1024,null,K.q,function(n){return[n]},[K.A]),t["\u0275did"](6,671744,null,0,K.v,[[8,null],[8,null],[8,null],[6,K.q]],{model:[0,"model"]},{update:"ngModelChange"}),t["\u0275prd"](2048,null,K.r,null,[K.v]),t["\u0275did"](8,16384,null,0,K.s,[[4,K.r]],null,null),(n()(),t["\u0275and"](16777216,null,null,1,null,ln)),t["\u0275did"](10,278528,null,0,j.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],function(n,l){var e=l.component;n(l,6,0,e.rewardValue),n(l,10,0,e.brandData.items)},function(n,l){n(l,3,0,t["\u0275nov"](l,8).ngClassUntouched,t["\u0275nov"](l,8).ngClassTouched,t["\u0275nov"](l,8).ngClassPristine,t["\u0275nov"](l,8).ngClassDirty,t["\u0275nov"](l,8).ngClassValid,t["\u0275nov"](l,8).ngClassInvalid,t["\u0275nov"](l,8).ngClassPending)})}function tn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","no-money"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["\u0275ted"](-1,null,["Sorry, you do not have enough rewards to make an order."])),(n()(),t["\u0275eld"](3,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t["\u0275ted"](4,null,["The minimum value for this card is $","."]))],null,function(n,l){n(l,4,0,l.component.minReward)})}function an(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"upb-toast-message",[],null,[[null,"closed"]],function(n,l,e){var t=!0;return"closed"===l&&(t=!1!==n.component.toastClosed(e)&&t),t},U.b,U.a)),t["\u0275did"](1,114688,null,0,q.a,[],{type:[0,"type"],message:[1,"message"]},{closed:"closed"})],function(n,l){var e=l.component;n(l,1,0,e.toast.type,e.toast.message)},null)}function rn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["Confirm Order for $",""]))],null,function(n,l){n(l,1,0,l.component.rewardValue||0)})}function un(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t["\u0275ted"](1,null,["Change to $",""]))],null,function(n,l){var e=l.component;n(l,1,0,e.rewardValue>e.maxReward?e.maxReward:e.minReward)})}function on(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,4,"button",[["class","btn btn-primary btn-lg"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.confirmReward()&&t),t},null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,rn)),t["\u0275did"](2,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,un)),t["\u0275did"](4,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,2,0,!e.rewardError),n(l,4,0,e.rewardError)},null)}function dn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","brand-disclaimer"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,0,"p",[],[[8,"outerHTML",1]],null,null,null,null))],null,function(n,l){n(l,1,0,l.component.brandData.disclaimer)})}function sn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,25,"div",[["class","brand-details-holder"]],null,null,null,null,null)),(n()(),t["\u0275eld"](1,0,null,null,13,"div",[["class","brand-details-container"]],null,null,null,null,null)),(n()(),t["\u0275eld"](2,0,null,null,4,"div",[["class","brand-image"]],null,null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,Y)),t["\u0275did"](4,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,Z)),t["\u0275did"](6,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](7,0,null,null,7,"div",[["class","brand-details"]],null,null,null,null,null)),(n()(),t["\u0275eld"](8,0,null,null,1,"h5",[],null,null,null,null,null)),(n()(),t["\u0275ted"](9,null,["",""])),(n()(),t["\u0275eld"](10,0,null,null,0,"p",[["class","description"]],[[8,"outerHTML",1]],null,null,null,null)),(n()(),t["\u0275and"](16777216,null,null,1,null,nn)),t["\u0275did"](12,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,en)),t["\u0275did"](14,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,tn)),t["\u0275did"](16,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,an)),t["\u0275did"](18,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275eld"](19,0,null,null,4,"div",[["class","brand-actions"]],null,null,null,null,null)),(n()(),t["\u0275eld"](20,0,null,null,1,"button",[["class","btn btn-gray btn-lg"],["type","button"]],null,[[null,"click"]],function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goBack()&&t),t},null,null)),(n()(),t["\u0275ted"](-1,null,[" Go Back "])),(n()(),t["\u0275and"](16777216,null,null,1,null,on)),t["\u0275did"](23,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,dn)),t["\u0275did"](25,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,4,0,e.brandData.imageUrls),n(l,6,0,!e.brandData.imageUrls),n(l,12,0,!e.fixedValues&&e.canOrder),n(l,14,0,e.fixedValues&&e.canOrder),n(l,16,0,!e.canOrder&&!e.rewardSuccess),n(l,18,0,e.rewardSuccess),n(l,23,0,e.canOrder),n(l,25,0,e.brandData.disclaimer)},function(n,l){var e=l.component;n(l,9,0,e.brandData.items[0].rewardName),n(l,10,0,e.brandData.description)})}function cn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"upb-toast-message",[],null,[[null,"closed"]],function(n,l,e){var t=!0;return"closed"===l&&(t=!1!==n.component.toastClosed(e)&&t),t},U.b,U.a)),t["\u0275did"](1,114688,null,0,q.a,[],{type:[0,"type"],message:[1,"message"]},{closed:"closed"})],function(n,l){var e=l.component;n(l,1,0,e.toast.type,e.toast.message)},null)}function pn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,0,"div",[["class","loading-overlay"]],null,null,null,null,null))],null,null)}function gn(n){return t["\u0275vid"](0,[(n()(),t["\u0275and"](16777216,null,null,1,null,sn)),t["\u0275did"](1,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,cn)),t["\u0275did"](3,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),t["\u0275and"](16777216,null,null,1,null,pn)),t["\u0275did"](5,16384,null,0,j.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(n,l){var e=l.component;n(l,1,0,e.brandData),n(l,3,0,e.rewardError&&!e.brandData),n(l,5,0,e.loading)},null)}function fn(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"upb-brand-details",[],null,null,null,gn,X)),t["\u0275did"](1,245760,null,0,W.a,[C.a,C.l,M.l,J.a],null,null)],function(n,l){n(l,1,0)},null)}var mn=t["\u0275ccf"]("upb-brand-details",W.a,fn,{},{},[]),bn=e("xQLJ"),hn=e("1rfl"),vn=e("b6SE"),wn=e("008C"),Cn=e("d62N"),On=e("T7CS"),Mn=e("S7LP"),_n=e("6aHO"),Pn=e("WVoM"),yn=e("Pi2X"),xn=e("p2+w"),Rn=e("mpiD"),In=e("OVOv"),Vn=e("WoVx"),Tn=e("X32H"),jn=e("jfHL"),kn=e("7faX"),Nn=e("7jUm"),Dn=e("e4Nc"),zn=e("Fq6B"),Sn=e("qina"),En=e("F+oH"),An=e("Jg5P"),$n=e("aZVl"),Ln=e("9VEM"),Bn=e("bnTs"),Gn=e("h5ll"),Fn=e("H5g1"),Un=e("dU8u"),qn=e("sU9O"),Hn=e("PCNd"),Kn=function(){return function(){}}(),Wn=e("zCE2");e.d(l,"RewardsModuleNgFactory",function(){return Jn});var Jn=t["\u0275cmf"](a,[],function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[r.a,u.a,o.a,i.a,d.a,s.a,c.a,p.a,g.a,f.a,m.a,b.a,h.a,v.a,w.a,T,F,mn]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,j.NgLocalization,j.NgLocaleLocalization,[t.LOCALE_ID,[2,j["\u0275angular_packages_common_common_a"]]]),t["\u0275mpd"](4608,K.h,K.h,[]),t["\u0275mpd"](4608,K.F,K.F,[]),t["\u0275mpd"](4608,bn.b,bn.b,[t.NgZone]),t["\u0275mpd"](4608,hn.a,hn.a,[]),t["\u0275mpd"](4608,vn.a,vn.a,[wn.a]),t["\u0275mpd"](4608,Cn.b,Cn.b,[]),t["\u0275mpd"](4608,On.a,On.a,[]),t["\u0275mpd"](4608,Mn.a,Mn.a,[]),t["\u0275mpd"](4608,_n.a,_n.a,[t.ComponentFactoryResolver,t.NgZone,t.Injector,Mn.a,t.ApplicationRef]),t["\u0275mpd"](4608,Pn.a,Pn.a,[]),t["\u0275mpd"](4608,yn.a,yn.a,[]),t["\u0275mpd"](4608,xn.a,xn.a,[]),t["\u0275mpd"](4608,Rn.a,Rn.a,[]),t["\u0275mpd"](4608,In.a,In.a,[]),t["\u0275mpd"](4608,Vn.a,Vn.a,[Tn.a,jn.a]),t["\u0275mpd"](4608,kn.a,kn.a,[M.l]),t["\u0275mpd"](4608,Nn.a,Nn.a,[M.l,C.l]),t["\u0275mpd"](4608,Dn.a,Dn.a,[]),t["\u0275mpd"](1073742336,j.CommonModule,j.CommonModule,[]),t["\u0275mpd"](1073742336,C.o,C.o,[[2,C.u],[2,C.l]]),t["\u0275mpd"](1073742336,zn.a,zn.a,[]),t["\u0275mpd"](1073742336,K.C,K.C,[]),t["\u0275mpd"](1073742336,K.y,K.y,[]),t["\u0275mpd"](1073742336,K.m,K.m,[]),t["\u0275mpd"](1073742336,Sn.a,Sn.a,[]),t["\u0275mpd"](1073742336,bn.a,bn.a,[]),t["\u0275mpd"](1073742336,En.a,En.a,[]),t["\u0275mpd"](1073742336,An.a,An.a,[]),t["\u0275mpd"](1073742336,$n.a,$n.a,[]),t["\u0275mpd"](1073742336,Ln.a,Ln.a,[]),t["\u0275mpd"](1073742336,Bn.a,Bn.a,[]),t["\u0275mpd"](1073742336,Gn.a,Gn.a,[]),t["\u0275mpd"](1073742336,Fn.a,Fn.a,[]),t["\u0275mpd"](1073742336,Cn.c,Cn.c,[]),t["\u0275mpd"](1073742336,Un.b,Un.b,[]),t["\u0275mpd"](1073742336,qn.b,qn.b,[]),t["\u0275mpd"](1073742336,Hn.a,Hn.a,[]),t["\u0275mpd"](1073742336,Kn,Kn,[]),t["\u0275mpd"](1073742336,Wn.a,Wn.a,[]),t["\u0275mpd"](1073742336,a,a,[]),t["\u0275mpd"](1024,C.j,function(){return[[{path:"",component:x,children:[{path:"",component:D},{path:":brandKey",component:W.a}]}]]},[])])})},"37MK":function(n,l,e){"use strict";var t=e("mrSG"),a=e("dzgT"),r=e("yGQT"),u=e("VnD/"),o=e("2WpN"),i=e("tg95"),d=e("2pPx"),s=e("E9S1"),c=e("3gbP"),p=e("AytR"),g=e("IzLi"),f=e("Ju5/"),m=function(){return f.a.Date.now()},b=e("SiRs"),h=Math.max,v=Math.min;e.d(l,"a",function(){return w});var w=function(n){function l(l,e,t,a){var r=n.call(this)||this;return r.route=l,r.router=e,r.store=t,r.rewardsService=a,r}return Object(t.d)(l,n),l.prototype.ngOnInit=function(){var n=this;this.subs=Object(a.a)(this.route.params).subscribe(function(l){return n.getInitData(l[0].brandKey)}),this.subs=this.store.pipe(Object(r.z)(i.f),Object(u.a)(Boolean)).subscribe(function(l){n.toast={message:l.error.errorMessage,type:"danger"},n.rewardError=!0,n.brandData=null})},l.prototype.goBack=function(){this.router.navigate([".."],{relativeTo:this.route,queryParamsHandling:"merge"})},l.prototype.validateRewardAmount=function(){!function(n,l,e){var t,a,r,u,o,i,d=0,s=!1,c=!1,p=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function f(l){var e=t,r=a;return t=a=void 0,d=l,u=n.apply(r,e)}function w(n){var e=n-i;return void 0===i||e>=l||e<0||c&&n-d>=r}function C(){var n=m();if(w(n))return O(n);o=setTimeout(C,function(n){var e=l-(n-i);return c?v(e,r-(n-d)):e}(n))}function O(n){return o=void 0,p&&t?f(n):(t=a=void 0,u)}function M(){var n=m(),e=w(n);if(t=arguments,a=this,i=n,e){if(void 0===o)return function(n){return d=n,o=setTimeout(C,l),s?f(n):u}(i);if(c)return o=setTimeout(C,l),f(i)}return void 0===o&&(o=setTimeout(C,l)),u}l=Object(b.a)(l)||0,Object(g.a)(void 0)&&(s=!!(void 0).leading,r=(c="maxWait"in void 0)?h(Object(b.a)((void 0).maxWait)||0,l):r,p="trailing"in void 0?!!(void 0).trailing:p),M.cancel=function(){void 0!==o&&clearTimeout(o),d=0,t=i=a=o=void 0},M.flush=function(){return void 0===o?u:O(m())}}(this.isValidRewardAmount(),500)},l.prototype.isValidRewardAmount=function(){return this.rewardValue=Number(this.rewardValue),this.fixedValues||this.minReward<=this.rewardValue&&this.rewardValue<=this.maxReward?(this.toast=null,this.rewardError=!1,!0):(this.toast={message:"The "+(this.rewardValue>this.maxReward?"maximum":"minimum")+" reward for this card is $"+(this.rewardValue>this.maxReward?this.maxReward:this.minReward),type:"danger"},this.rewardError=!0,!1)},l.prototype.confirmReward=function(){var n=this;if(!this.isValidRewardAmount())return this.rewardValue=+(this.rewardValue>this.maxReward?this.maxReward:this.minReward),void this.validateRewardAmount();var l="Your rewards redemption was successful. Most rewards card orders are delivered via email within "+p.a.REWARD_EMAIL_DELIVERY_MINUTES+" minutes, but please allow up to 24 hours.";this.loading=!0;var e={amount:this.rewardValue,companyId:this.selectedCompany.id,utid:this.brandData.items[0].utid};if(this.fixedValues){var t=this.brandData.items.find(function(l){return l.faceValue===n.rewardValue});e.utid=t.utid}this.user.rewardsBalance=this.user.rewardsBalance-this.rewardValue,this.store.dispatch(new c.r(this.user)),this.subs=this.rewardsService.orderReward(this.user.id,e).pipe(Object(o.a)(function(){return n.loading=!1})).subscribe(function(t){return n.onSuccessOrder(t,e,l)},function(){n.rewardSuccess=!1,n.toast={message:"Service Unavailable! Please reload page and try again.",type:"danger"},n.rewardError=!0,n.getInitData(n.brandData.brandKey)})},l.prototype.onSuccessOrder=function(n,l,e){this.user.rewardsBalance=Math.min(this.user.rewardsBalance,n.balance),this.store.dispatch(new c.r(this.user)),this.getInitData(this.brandData.brandKey),this.rewardSuccess=!0,this.toast={message:e,type:"success"}},l.prototype.toastClosed=function(n){this.rewardError=n,this.rewardSuccess=n},l.prototype.getInitData=function(n){var l=this;this.subs=Object(a.a)(this.store.pipe(Object(r.z)(i.a)),this.store.pipe(Object(r.z)(i.c)),this.store.pipe(Object(r.z)(i.e))).subscribe(function(e){var t=e[0],a=e[1],r=e[2];if(r.length){if(l.totalReward=t.rewardsBalance,l.selectedCompany=a.selectedCompany,l.user=t,l.brandData=r.find(function(l){return l.brandKey===n}),l.brandData.items.length>1||"FIXED_VALUE"===l.brandData.items[0].valueType)return l.fixedValues=!0,l.rewardValue=l.brandData.items[0].faceValue,void(l.canOrder=l.totalReward>=l.rewardValue);l.maxReward=l.totalReward<l.brandData.items[0].maxValue?Math.floor(l.totalReward):l.brandData.items[0].maxValue,l.minReward=Math.ceil(l.brandData.items[0].minValue),l.rewardValue=l.minReward,l.canOrder=l.totalReward>=l.minReward}else l.store.dispatch(new s.d)})},l}(d.a)},"8M4i":function(n,l,e){"use strict";var t=e("ylTp"),a=Object.prototype,r=a.hasOwnProperty,u=a.toString,o=t.a?t.a.toStringTag:void 0,i=Object.prototype.toString,d=t.a?t.a.toStringTag:void 0;l.a=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":d&&d in Object(n)?function(n){var l=r.call(n,o),e=n[o];try{n[o]=void 0;var t=!0}catch(i){}var a=u.call(n);return t&&(l?n[o]=e:delete n[o]),a}(n):function(n){return i.call(n)}(n)}},EUcb:function(n,l,e){"use strict";l.a=function(n){return null!=n&&"object"==typeof n}},G8aS:function(n,l,e){"use strict";var t=e("8M4i"),a=e("EUcb");l.a=function(n){return"symbol"==typeof n||Object(a.a)(n)&&"[object Symbol]"==Object(t.a)(n)}},IzLi:function(n,l,e){"use strict";l.a=function(n){var l=typeof n;return null!=n&&("object"==l||"function"==l)}},"Ju5/":function(n,l,e){"use strict";var t=e("XqMk"),a="object"==typeof self&&self&&self.Object===Object&&self;l.a=t.a||a||Function("return this")()},SiRs:function(n,l,e){"use strict";var t=e("IzLi"),a=e("G8aS"),r=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,i=/^0o[0-7]+$/i,d=parseInt;l.a=function(n){if("number"==typeof n)return n;if(Object(a.a)(n))return NaN;if(Object(t.a)(n)){var l="function"==typeof n.valueOf?n.valueOf():n;n=Object(t.a)(l)?l+"":l}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(r,"");var e=o.test(n);return e||i.test(n)?d(n.slice(2),e?2:8):u.test(n)?NaN:+n}},XqMk:function(n,l,e){"use strict";var t="object"==typeof global&&global&&global.Object===Object&&global;l.a=t},ylTp:function(n,l,e){"use strict";var t=e("Ju5/");l.a=t.a.Symbol}}]);
//# sourceMappingURL=10.ab844c26b05136876fa5.js.map